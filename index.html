
<!DOCTYPE HTML>
<html lang="" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>Introduction Â· redux-domain</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.2">
        
        
        
    
    <link rel="stylesheet" href="gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="gitbook/gitbook-plugin-highlight/website.css">
                
            
                
                <link rel="stylesheet" href="gitbook/gitbook-plugin-search/search.css">
                
            
                
                <link rel="stylesheet" href="gitbook/gitbook-plugin-fontsettings/website.css">
                
            
                
                <link rel="stylesheet" href="gitbook/gitbook-plugin-theme-api/theme-api.css">
                
            
        

    

    
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="OVERVIEW.html" />
    
    

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="Type to search" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        
    
        <li class="chapter active" data-level="1.1" data-path="./">
            
                <a href="./">
            
                    
                    Introduction
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2" data-path="OVERVIEW.html">
            
                <a href="OVERVIEW.html">
            
                    
                    Overview
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3" data-path="docs/Summary.md">
            
                <span>
            
                    
                    Summary
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4" data-path="api/README.md">
            
                <span>
            
                    
                    API
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.1" data-path="api/Domain.html">
            
                <a href="api/Domain.html">
            
                    
                    Domain
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.2" data-path="api/DomainManager.html">
            
                <a href="api/DomainManager.html">
            
                    
                    DomainManager
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.3" data-path="api/UserState.html">
            
                <a href="api/UserState.html">
            
                    
                    UserState
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.4" data-path="api/Helpers.html">
            
                <a href="api/Helpers.html">
            
                    
                    Helpers
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.5" data-path="inishts/README.md">
            
                <span>
            
                    
                    Insights
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.5.1" data-path="insights/DomainKey.html">
            
                <a href="insights/DomainKey.html">
            
                    
                    DomainKey
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.2" data-path="insights/DomainMethodDecorators.html">
            
                <a href="insights/DomainMethodDecorators.html">
            
                    
                    DomainMethodDecorators
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.6" data-path="more/more">
            
                <span>
            
                    
                    More
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.6.1" data-path="more/brainstorm.html">
            
                <a href="more/brainstorm.html">
            
                    
                    Brainstorm
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.2" data-path="more/decisions.html">
            
                <a href="more/decisions.html">
            
                    
                    Decisions
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.3" data-path="more/todos.html">
            
                <a href="more/todos.html">
            
                    
                    Todos
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            Published with GitBook
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href="." >Introduction</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <h2 id="current-situation">Current situation:</h2>
<p>Traditionally you have to create:</p>
<ul>
<li>Action type constant</li>
<li>Action creator (import action type constant)</li>
<li>Reducers or Sagas<ul>
<li>Reducers are typically created with helper libs like <code>redux-actions</code> or <code>redux-act</code></li>
<li>Sagas are managed by a custom implementation
In addition, more or less, all of those are in separate folders and files - it&apos;s just cluttered and it&apos;s difficult to have an overview</li>
</ul>
</li>
</ul>
<h2 id="advantages-with-redux-domain">Advantages with <strong>redux-domain</strong>:</h2>
<ul>
<li>Create an <strong>action</strong> with a particular <strong>handler</strong> (reducer or saga) in a uniform way</li>
<li>No more cluttered <strong>action creator</strong>/<strong>action type constant</strong>/<strong>reducer</strong>/<strong>saga</strong>
Things which belongs together are now at the same place and you can <strong>be sure</strong> it&apos;s registered</li>
<li>Full autocompletion support for all your domains and it actions (flow)</li>
<li>No more ton of action creator imports in your component file</li>
<li>Dispatch action&apos;s directly without use redux&apos;s <strong>bindActionCreators</strong></li>
</ul>
<h1 id="demonstration-how-to-implement-a-domain">Demonstration how to implement a Domain</h1>
<p>The example domain below demonstrates how you implement several use cases.
What is the benefit of using domains? There are many!</p>
<p>To appreciate the <strong>benefits of domains</strong> here a summary:</p>
<p><strong>Productivity demonstration:</strong></p>
<p>Fast overview of all your possibilities!</p>
<p>domainBundle./<em><autocompletion> - see all your domains</autocompletion></em>/
domainBundle.user./<em><autocompletion> - see all the possible actions in a domain</autocompletion></em>/
domainBundle.user.set({}); // reducer action
domainBundle.user.fetch(123); // saga action</p>
<p>If you go-to the definition of &quot;set&quot; or &quot;fetch&quot; method you see directly handler (reducer or saga),
and of course of the <strong>action type</strong> string.</p>
<h2 id="disadvantages">Disadvantages:</h2>
<pre><code class="lang-JS"><span class="hljs-keyword">import</span> { Domain } <span class="hljs-keyword">from</span> <span class="hljs-string">&apos;redux-domain&apos;</span>
<span class="hljs-keyword">import</span> { put } <span class="hljs-keyword">from</span> <span class="hljs-string">&apos;redux-saga&apos;</span>

<span class="hljs-comment">// Try to use flow types for better development experience (autocompletion and validation for methods)</span>
type User = {<span class="hljs-comment">/* ... */</span>};

<span class="hljs-comment">/**
 * Important generic notes and constrains:
 * - A method which uses the @action decorator can be decorated with exactly one
 *   @reducer OR exactly one @saga but not both
 * - The method body acts as &quot;payload creator&quot; instead of an &quot;action creator&quot;
 * - If the method returns nothing the payload is &quot;null&quot;
 *
 * Usage variants in short (full code examples are below!):
 *
 * // Pseudo type (not valid flow type):
 * DomainStateReducer = (state: DomainState, payload: Action.payload [, action: Action]) =&gt; DomainState
 * SagaFunctionGenerator = Generator(payload: Action.payload, action: Action)
 *
 * 1.
 * @reducer(DomainStateReducer)
 * @action(actionType: string)
 * (arg1, argN, ...) =&gt; ?Payload
 *
 * 2.
 * @reducer(SagaFunctionGenerator)
 * @action(actionType: string)
 * (arg1, argN, ...) =&gt; ?Payload
 *
 * 3.
 * @action(actionType: string)
 * (arg1, argN, ...) =&gt; ?Payload
 *
 * It&apos;s not possible to create a method which ONLY @reducer or @saga WITHOUT @action
 * A reducer needs an action anyway and saga&apos;s require an action as well here (Domain-&gt;getSagas returns ActionSagaMap!)
 * Furthermore this library should not contain to much magic / polymorphic stuff. means:
 * An instance method represents an action or selector and we don&apos;t want to mix it with reducers only stuff.
 *
 * If you want to register a handler which ONLY handles a certain actionType without
 *
 * Below are more @reducer/@saga decorator specific information
 */</span>

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">UserDomain</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Domain</span> </span>{
  <span class="hljs-comment">/** Create a (actionType, actionCreator -&gt; reducer) pair **
   *
   * - Use the reducer and action decorator, aware the order (1. reducer, 2. action)
   * - Reducer function:
   *    - Aware the reducer function signature (state, payload) instead (state, action) (same like in redux-act)
   *      If you need the action object (to access meta data or custom fields) the third argument
   *      contains the whole action object!
        - The return value is the new sate (same like plain redux)
   *    - &quot;this&quot; points to the domain instance (!DO NOT use anonymous function then!)
   */</span>
  @reducer(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">state, payload<span class="hljs-comment">/*, action */</span></span>) </span>{
      <span class="hljs-comment">// create your new state</span>
      <span class="hljs-keyword">let</span> newState = <span class="hljs-built_in">Object</span>.assign({}, state);

      <span class="hljs-comment">// return the new state</span>
      <span class="hljs-keyword">return</span> newState;
  })
  @action(<span class="hljs-string">&apos;USER/SET&apos;</span>)
  set(user: User) {
    <span class="hljs-keyword">return</span> user;
    <span class="hljs-comment">// This becomes:</span>
    <span class="hljs-comment">// { type: &apos;USER/FETCH&apos;, payload: &lt;user&gt; }</span>
  }

  <span class="hljs-comment">/** Create a (actionType, actionCreator -&gt; reducer) pair WITHOUT payload
   *
   * If your handler don&apos;t require any data just create an empty method body
   * Because you don&apos;t need the state in the reducer neither,
   * you can just remove the parameters from the reducer function
   */</span>
  @reducer(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
  })
  @action(<span class="hljs-string">&apos;USER/UNSET&apos;</span>)
  unset() {}

  <span class="hljs-comment">/**
   * Same logic as the example above but in very short manner
   * Did you remember how much cluttered lines you need this previously? .. Ha Ha...
   */</span>
   @reducer(() =&gt; <span class="hljs-literal">null</span>)
   @action(<span class="hljs-string">&apos;USER/UNSET_2&apos;</span>)
   unset() {}

  <span class="hljs-comment">/** Create a (actionType, actionCreator -&gt; saga) pair **
   *
   * - Use the saga and action decorator, aware of the order (1. saga, 2. action)
   * - Saga function:
   *   - Aware the saga function signature (payload) instead (action)
   *     If you need the action object (to access data or custom fields) the second argument
   *     contains the whole action object!
   *   - &quot;this&quot; points to the domain instance (!DO NOT use anonymous function then!)
   *   - Saga effects work same as before, to use the put effect, below it is included in the example code
   */</span>
  @saga(<span class="hljs-function"><span class="hljs-keyword">function</span>*(<span class="hljs-params">payload<span class="hljs-comment">/*, action*/</span></span>) </span>{
    <span class="hljs-comment">// Some API call with identifier with saga call effect or whatever</span>
    <span class="hljs-keyword">let</span> user = {<span class="hljs-comment">/*fetched from some API calls*/</span>};

    <span class="hljs-comment">// For example you can use the put effect to store data with a reducer</span>
    <span class="hljs-keyword">yield</span> put(<span class="hljs-keyword">this</span>.set(user).action);
  })
  @action(<span class="hljs-string">&apos;USER/FETCH&apos;</span>)
  fetch(id: number|string) {
    <span class="hljs-keyword">return</span> id;
    <span class="hljs-comment">// This becomes:</span>
    <span class="hljs-comment">// { type: &apos;USER/FETCH&apos;, payload: &lt;id&gt; }</span>
  }

  <span class="hljs-comment">/** Create an action which is not handled **
   *
   * - You can handle it in another domain or wherever
   * - Even if you could handle it by a &quot;reducer&quot; somewhere else, it&apos;s doubtful why someone
   *   would do that - because reducers should belong to the domain.
   *   However we kept the door open, so it&apos;s possible if someone would really need this.
   *   BTW: It&apos;s more common to handle it by a saga somewhere else as a kind of &quot;event system&quot;.
   */</span>
  @action(<span class="hljs-string">&apos;USER/SCREAM&apos;</span>)
  scream(loud: boolean, key: string) {
    <span class="hljs-keyword">return</span> { loud, key };
    <span class="hljs-comment">// This becomes:</span>
    <span class="hljs-comment">// { type: &apos;USER/FETCH&apos;, payload: { loud: &lt;loud&gt;, key: &lt;key&gt; } }</span>
  }

  <span class="hljs-comment">/** Create a selector method which return a part of the state **
   *
   * This is a simple method which return value. Death simple.
   * The most important thing to know is:
   * - this.state = The current domain state
   * - this.rootState = The current root redux state
   */</span>
  get(id: number): User|<span class="hljs-literal">null</span> {
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.state[id] || <span class="hljs-literal">null</span>;
    <span class="hljs-comment">// return this.state.get(id); &lt;- with ImmutableMap (immutable.js)</span>
  }
}
</code></pre>
<h1 id="basic-usage">Basic Usage</h1>
<ol>
<li>Implement several domains (which extends the Domain class)</li>
<li>Create a DomainBundle which receives all Domain instances in the constructor</li>
<li>Fetch all reducers and sagas from the DomainBundle<ul>
<li>Use the <strong>domainBundle.getSagas</strong> and the <strong>domainBundle.getReducers</strong> method
which return all reducers/sagas from all domains</li>
</ul>
</li>
<li>Create the redux store and populate it with the reducers and sagas
-</li>
</ol>
<h1 id="suggested-structure-example">Suggested structure (Example)</h1>
<p>domains/index.js:</p>
<ul>
<li>domains/abc-domain.js</li>
<li>domains/n-domain.js</li>
</ul>
<p>The domains folder contains for <strong>each domain a file</strong> which exports a class which extends the Domain class.
The index.js <strong>imports all domains</strong> and create a new <strong>DomainBundle</strong> instance with all domains.</p>
<h1 id="integration">Integration</h1>
<ul>
<li>redux (uses createStore, applyMiddleware)</li>
<li>redux-actions (uses redux-reducers, handleActions)</li>
<li>redux-saga (uses applyMiddleware)</li>
<li>reselect</li>
</ul>
<h1 id="compatibility-verified">Compatibility (verified)</h1>
<ul>
<li>immutable (for domain state)</li>
<li>seamless-immutable (for domain state)</li>
</ul>

                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            

        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"Introduction","level":"1.1","depth":1,"next":{"title":"Overview","level":"1.2","depth":1,"path":"OVERVIEW.md","ref":"OVERVIEW.md","articles":[]},"dir":"ltr"},"config":{"plugins":["theme-api","edit-link","livereload"],"root":"docs","styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"pluginsConfig":{"github":{"url":"https://github.com/aight8/redux-domain/"},"livereload":{},"search":{},"lunr":{"maxIndexSize":1000000,"ignoreSpecialCharacters":false},"fontsettings":{"theme":"white","family":"sans","size":2},"highlight":{},"theme-api":{"languages":[],"split":true,"theme":"dark"},"sharing":{"facebook":true,"twitter":true,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"edit-link":{"label":"Edit This Page","base":"https://github.com/aight8/redux-domain/tree/master"},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false}},"theme":"default","pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"variables":{},"title":"redux-domain","gitbook":"3.2"},"file":{"path":"README.md","mtime":"2017-03-10T02:10:41.000Z","type":"markdown"},"gitbook":{"version":"3.2.2","time":"2017-03-10T02:38:33.612Z"},"basePath":".","book":{"language":""}});
        });
    </script>
</div>

        
    <script src="gitbook/gitbook.js"></script>
    <script src="gitbook/theme.js"></script>
    
        
        <script src="gitbook/gitbook-plugin-edit-link/plugin.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-livereload/plugin.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-search/search-engine.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-search/search.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-sharing/buttons.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-theme-api/theme-api.js"></script>
        
    

    </body>
</html>

